# mahjong

[打麻將的數學冷知識（二）：如何一眼就知道胡牌了沒](https://www.thenewslens.com/article/100657)  


**先把可能的對子拿出來，然後最小牌能拿走一刻即拿走一刻，否則試著拿走一順**  


一副牌P，若把一個**對子**拿掉後，假設此時數字最小的牌是x， 
若x的張數是3張以上，則拿掉**一刻**（3張x）後，剩下牌為Q。  
否則拿掉**一順**（x, x+1, x+2）之後，剩下的牌為Q。（若無法拿，則P沒胡）  

則「P胡」若且唯若「Q胡」。 （英語：if and only if，iff）


#### 例1：判斷P = 33345678是否胡牌？

P中唯一能當眼睛的地方，就是3，因此把33一對拿掉，變成Q=345678，Q是胡牌型，所以P也是。 [33]345678 = [33][345]678

#### 例2：判斷P = 55666777889是否胡牌？

若拿55，剩下666777889；最小的6有三張，直接拿掉666，剩777889，再拿777，得889，所以沒胡。 [55][666][777]889
若拿66，剩下556777889；最小的是兩張5，但沒有辦法拿掉兩個567了，所以沒胡。55[66]6777889
若拿77，剩下556667889；最小的是兩張5，但沒有辦法拿掉兩個567了，所以沒胡。55666[77]7889

各種能拿掉對子的方式都試過，都無法胡，所以P不是胡牌型。


### 判斷聽牌

只要試著加入任何一張牌，再嘗試拿掉各種可能的對，利用定理1判斷是否可以胡牌，即可得知聽哪些牌，僅需要O（n3）的時間。

例3：判斷3456667888聽什麼牌？

加入1，剩13開頭，沒胡  13456667888 = 13[456]6[678]88
加入2

2345[66]67888 拿掉66，剩234567888 = [234][567][888]，胡！
234566678[88] 拿掉88，剩234566678=[234]5[66]678 ，沒胡

加入3

[33]456667888 拿掉33，剩456667888 = [456]667[888]，沒胡
3345[66]67888 拿掉66，334[567][888]，剩334開頭，沒胡
334566678[88] 拿掉88，334[566][678]，剩334開頭，沒胡
